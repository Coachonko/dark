"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[374],{8422:(e,t,n)=>{var i;n.d(t,{Z:()=>i,h:()=>d}),function(e){e.PRODUCTS="products",e.PRODUCT_ITEM="product-item"}(i||(i={}));const r=void 0===globalThis.window?100:600,o=e=>new Promise((t=>setTimeout(t,e)));let a=0;const c=new Array(50).fill(null).map((()=>({id:++a,name:`Product #${a}`,description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nostrum blanditiis quia minus corrupti quidem. Ipsam quae ad velit repudiandae molestias unde".repeat(3)}))),d={fetchProductList:async()=>(console.log("[fetch]: product-list"),await o(r),c.map((e=>({...e,description:null})))),fetchProduct:async e=>(console.log("[fetch]: product",e),s(e)||u(),await o(r),c.find((t=>t.id===e))||null),addProduct:async e=>(s(e.id)&&u(),await o(r),e.id=++a,c.push(e),e),async changeProduct(e){if(s(e.id)||u(),!e)return null;await o(r);const t=c.findIndex((t=>t.id===e.id));return-1!==t&&c.splice(t,1,e),e},async removeProduct(e){s(e)||u(),await o(r);const t=c.findIndex((t=>t.id===e));return-1!==t&&c.splice(t,1),!0}},s=e=>"number"==typeof e&&!Number.isNaN(e),u=()=>{throw new Error("Invalid id!")}},6374:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(2654),r=n(5747),o=n(9717),a=n(3524),c=n(3020),d=n(1523),s=n(940),u=n(5450),l=n(8422),h=n(5010);const p=(0,i.wU)((()=>{const{url:e}=(0,d.b)(),t=(0,s.k)(),n=(0,u.U)(),i=Number(n.get("id")),p=(0,r.YT)().read({key:l.Z.PRODUCT_ITEM,id:i}),[m,{loading:f}]=(0,o.D)(l.h.removeProduct,{onComplete:e=>{const t=e.read({key:l.Z.PRODUCTS});if(t){const n=t.data,r=n.findIndex((e=>e.id===i));-1!==r&&(n.splice(r,1),e.optimistic({key:l.Z.PRODUCTS,data:n}))}e.delete({key:l.Z.PRODUCT_ITEM,id:i})}}),w=e.replace(`${i}/remove/`,"");return(0,a.h)(h.Zb,{$loading:f},p?(0,a.h)(c.H,null,(0,a.h)("h3",null,"Do you want to remove product #",i,"? ðŸ¤”"),(0,a.h)(h.zx,{onClick:async()=>{f||(await m(i),t.push(w))}},"Yes"),(0,a.h)(h.zx,{onClick:()=>t.back()},"No")):(0,a.h)("h3",null,"It seems there is no product with #",i," ðŸ¤«"))}))},9717:(e,t,n)=>{n.d(t,{D:()=>c});var i=n(9812),r=n(4435),o=n(1261),a=n(5747);function c(e,t){const{refetchQueries:n=[],onComplete:c}=t||{},d=(0,r.P)(),s=(0,a.YT)(),u=(0,o.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let r=null;try{u.isFetching=!0,u.error=null,d(),r=await e(...t),(0,i.EY)(c)&&c(s,r),n.forEach((e=>s.invalidate({key:e})))}catch(e){(0,i.vU)(e),u.error=String(e)}finally{u.isFetching=!1,d()}return r},{loading:u.isFetching,data:u.data,error:u.error}]}},1523:(e,t,n)=>{n.d(t,{b:()=>a});var i=n(1261),r=n(3113),o=n(3397);function a(){const e=(0,r.M6)();(0,r.BU)(e);const t=(0,r._L)(),{location:{pathname:n}}=e,a=(0,i.Y)((()=>t?(0,o.L7)(n,t):""),[t,n]);return{path:t,url:a}}},5450:(e,t,n)=>{n.d(t,{U:()=>r});var i=n(3113);function r(){const e=(0,i.M6)();return(0,i.BU)(e),e.params}}}]);
//# sourceMappingURL=374.build.js.map