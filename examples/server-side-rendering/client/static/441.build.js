"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[441],{8422:(e,t,i)=>{var n;i.d(t,{Z:()=>n,h:()=>c}),function(e){e.PRODUCTS="products",e.PRODUCT_ITEM="product-item"}(n||(n={}));const a=void 0===globalThis.window?100:600,r=e=>new Promise((t=>setTimeout(t,e)));let d=0;const o=new Array(50).fill(null).map((()=>({id:++d,name:`Product #${d}`,description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nostrum blanditiis quia minus corrupti quidem. Ipsam quae ad velit repudiandae molestias unde".repeat(3)}))),c={fetchProductList:async()=>(console.log("[fetch]: product-list"),await r(a),o.map((e=>({...e,description:null})))),fetchProduct:async e=>(console.log("[fetch]: product",e),s(e)||u(),await r(a),o.find((t=>t.id===e))||null),addProduct:async e=>(s(e.id)&&u(),await r(a),e.id=++d,o.push(e),e),async changeProduct(e){if(s(e.id)||u(),!e)return null;await r(a);const t=o.findIndex((t=>t.id===e.id));return-1!==t&&o.splice(t,1,e),e},async removeProduct(e){s(e)||u(),await r(a);const t=o.findIndex((t=>t.id===e));return-1!==t&&o.splice(t,1),!0}},s=e=>"number"==typeof e&&!Number.isNaN(e),u=()=>{throw new Error("Invalid id!")}},6441:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var n=i(2654),a=i(9717),r=i(5747),d=i(3524),o=i(5450),c=i(1523),s=i(940),u=i(8422),l=i(5010);const m=(0,n.wU)((()=>{const e=(0,o.U)(),t=Number(e.get("id")),[i,{loading:n}]=(0,a.D)(u.h.changeProduct,{onComplete:(e,i)=>{const n=e.read({key:u.Z.PRODUCTS});if(n){const a=n.data;a.find((e=>e.id===t)).name=i.name,e.optimistic({key:u.Z.PRODUCTS,data:a}),e.optimistic({key:u.Z.PRODUCT_ITEM,data:i,id:t})}}}),{url:m}=(0,c.b)(),p=(0,s.k)(),h=m.replace(`${t}/edit/`,""),f=(0,r.YT)().read({key:u.Z.PRODUCT_ITEM,id:t})?.data;return(0,d.h)(l.Zb,{$loading:n},(0,d.h)("h3",null,"Edit product"),f?(0,d.h)(l.l0,{onSubmit:async e=>{e.preventDefault();const t=e.target.elements.name.value,a=e.target.elements.desc.value;n||(await i({...f,name:t,description:a}),p.push(h))}},(0,d.h)("label",{for:"name"},"Name:"),(0,d.h)(l.II,{id:"name",required:!0,value:f.name}),(0,d.h)("label",{for:"desc"},"Description:"),(0,d.h)(l.gx,{id:"desc",required:!0,rows:5,value:f.description}),(0,d.h)(l.zx,{type:"submit"},"Edit")):(0,d.h)("div",null,"It seems there is no product with #",t," ðŸ¤«"))}))},9717:(e,t,i)=>{i.d(t,{D:()=>o});var n=i(9812),a=i(4435),r=i(1261),d=i(5747);function o(e,t){const{refetchQueries:i=[],onComplete:o}=t||{},c=(0,a.P)(),s=(0,d.YT)(),u=(0,r.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let a=null;try{u.isFetching=!0,u.error=null,c(),a=await e(...t),(0,n.EY)(o)&&o(s,a),i.forEach((e=>s.invalidate({key:e})))}catch(e){(0,n.vU)(e),u.error=String(e)}finally{u.isFetching=!1,c()}return a},{loading:u.isFetching,data:u.data,error:u.error}]}},1523:(e,t,i)=>{i.d(t,{b:()=>d});var n=i(1261),a=i(3113),r=i(3397);function d(){const e=(0,a.M6)();(0,a.BU)(e);const t=(0,a._L)(),{location:{pathname:i}}=e,d=(0,n.Y)((()=>t?(0,r.L7)(i,t):""),[t,i]);return{path:t,url:d}}},5450:(e,t,i)=>{i.d(t,{U:()=>a});var n=i(3113);function a(){const e=(0,n.M6)();return(0,n.BU)(e),e.params}}}]);
//# sourceMappingURL=441.build.js.map