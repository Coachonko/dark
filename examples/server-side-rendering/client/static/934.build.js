"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[934],{8422:(e,t,n)=>{var i;n.d(t,{Z:()=>i,h:()=>c}),function(e){e.PRODUCTS="products",e.PRODUCT_ITEM="product-item"}(i||(i={}));const r=void 0===globalThis.window?100:600,a=e=>new Promise((t=>setTimeout(t,e)));let o=0;const d=new Array(50).fill(null).map((()=>({id:++o,name:`Product #${o}`,description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nostrum blanditiis quia minus corrupti quidem. Ipsam quae ad velit repudiandae molestias unde".repeat(3)}))),c={fetchProductList:async()=>(console.log("[fetch]: product-list"),await a(r),d.map((e=>({...e,description:null})))),fetchProduct:async e=>(console.log("[fetch]: product",e),s(e)||l(),await a(r),d.find((t=>t.id===e))||null),addProduct:async e=>(s(e.id)&&l(),await a(r),e.id=++o,d.push(e),e),async changeProduct(e){if(s(e.id)||l(),!e)return null;await a(r);const t=d.findIndex((t=>t.id===e.id));return-1!==t&&d.splice(t,1,e),e},async removeProduct(e){s(e)||l(),await a(r);const t=d.findIndex((t=>t.id===e));return-1!==t&&d.splice(t,1),!0}},s=e=>"number"==typeof e&&!Number.isNaN(e),l=()=>{throw new Error("Invalid id!")}},7934:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(2654),r=n(9717),a=n(3524),o=n(1523),d=n(940),c=n(8422),s=n(5010);const l=(0,i.wU)((()=>{const[e,{loading:t}]=(0,r.D)(c.h.addProduct,{onComplete:(e,t)=>{const n=e.read({key:c.Z.PRODUCTS});if(n){const i=n.data;i.push(t),e.optimistic({key:c.Z.PRODUCTS,data:i})}}}),{url:n}=(0,o.b)(),i=(0,d.k)(),l=n.replace("add/","");return(0,a.h)(s.Zb,{$loading:t},(0,a.h)("h3",null,"Add product"),(0,a.h)(s.l0,{onSubmit:async n=>{n.preventDefault();const r=n.target.elements.name.value,a=n.target.elements.desc.value;t||(await e({name:r,description:a}),i.push(l))}},(0,a.h)("label",{for:"name"},"Name:"),(0,a.h)(s.II,{id:"name",required:!0}),(0,a.h)("label",{for:"desc"},"Description:"),(0,a.h)(s.gx,{id:"desc",required:!0,rows:3}),(0,a.h)(s.zx,{type:"submit"},"Add")))}))},9717:(e,t,n)=>{n.d(t,{D:()=>d});var i=n(9812),r=n(4435),a=n(1261),o=n(5747);function d(e,t){const{refetchQueries:n=[],onComplete:d}=t||{},c=(0,r.P)(),s=(0,o.YT)(),l=(0,a.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let r=null;try{l.isFetching=!0,l.error=null,c(),r=await e(...t),(0,i.EY)(d)&&d(s,r),n.forEach((e=>s.invalidate({key:e})))}catch(e){(0,i.vU)(e),l.error=String(e)}finally{l.isFetching=!1,c()}return r},{loading:l.isFetching,data:l.data,error:l.error}]}},1523:(e,t,n)=>{n.d(t,{b:()=>o});var i=n(1261),r=n(3113),a=n(3397);function o(){const e=(0,r.M6)();(0,r.BU)(e);const t=(0,r._L)(),{location:{pathname:n}}=e,o=(0,i.Y)((()=>t?(0,a.L7)(n,t):""),[t,n]);return{path:t,url:o}}}}]);
//# sourceMappingURL=934.build.js.map