"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[997],{9997:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(2654),r=i(3524),a=i(3020),o=i(5450),c=i(1523),d=i(1169),s=i(9041),u=i(5010);const l=(0,n.wU)((({slot:e})=>{const t=(0,o.U)(),i=Number(t.get("id")),{data:n,loading:l,error:h}=(0,s.iB)(i),{url:f}=(0,c.b)(),p=f+"edit/",m=f+"remove/";return l?(0,r.h)(u.$j,null):h?(0,r.h)(u.jj,{value:h}):n?e||(0,r.h)(u.Zb,null,n?(0,r.h)(a.H,null,(0,r.h)("h3",null,n.name),(0,r.h)("p",null,n.description)):(0,r.h)("h3",null,"Item not found ðŸ˜Ÿ"),n&&(0,r.h)(a.H,null,(0,r.h)(u.zx,{as:d.r,to:p},"Edit"),(0,r.h)(u.zx,{as:d.r,to:m},"Remove"))):(0,r.h)(u.Zb,null,(0,r.h)("h3",null,"It seems there is no product with #",i," ðŸ¤«"))}))},9041:(e,t,i)=>{i.d(t,{N8:()=>b,oD:()=>R,iB:()=>I,rn:()=>U,jb:()=>S});var n,r=i(5747),a=i(9812),o=i(3760),c=i(7544),d=i(6238),s=i(8047),u=i(4435),l=i(1261),h=i(3443);function f(e,t){const{variables:i={},key:n,extractId:f=(()=>r.kI),onBefore:m}=t||{variables:{}},y=(0,h.pj)(),g=(0,r.YT)(),P=f(i),k=(0,l.Y)((()=>y.getNextResourceId()),[]),T=(0,l.Y)((()=>function(e,t,i){const n={isFetching:!0,isLoaded:!1,data:null,error:null,cacheKey:t,cacheId:i};if(e){const r=e.read({key:t,id:i});r&&(n.isFetching=!1,n.isLoaded=!0,n.data=r.data)}return n}(g,n,P)),[]),{register:v,unregister:w}=(0,s.h)(),[U,I]=function(){const e=(0,l.Y)((()=>({isMounted:!0,isFirstTime:!0})),[]),{isFirstTime:t}=e;return(0,o.b)((()=>(e.isFirstTime=!1,()=>e.isMounted=!1)),[]),[()=>e.isMounted,()=>t]}(),b=(0,u.P)(),R=()=>U()&&b(),S=(0,c.X)(),C=y.getIsHydrateZone(),{isLoaded:D}=T;T.cacheKey=n,T.cacheId=P;const F=async(t,r)=>{const o=t?r:i,c=f(o);(0,a.EY)(m)&&m();try{S||I()||(T.isFetching=!0,R());const t=await e(o);return S?y.setResource(k,[t,null]):(w(k),T.data=t,T.isFetching=!1,T.error=null),n&&g&&t&&g.write({key:n,id:c,data:t}),t}catch(e){(0,a.vU)(e),S?y.setResource(k,[null,String(e)]):(w(k),T.isFetching=!1,T.error=String(e))}finally{S||(T.isLoaded=!0,R())}};if((0,d.d4)((()=>{if(!C){if(n&&g&&g.read({key:n,id:P})?.valid)return;F()}}),[...(0,a.Yl)(i)]),(0,d.d4)((()=>{let e=null;return g&&(e=g.subscribe((({type:e,key:t,id:i})=>{t===T.cacheKey&&i===T.cacheId&&("invalidate"!==e&&"optimistic"!==e||g.canUpdate(t)&&F())}))),()=>{w(k),(0,a.EY)(e)&&e()}}),[]),S||C){const e=y.getResource(k);if(S)e?p(T,e):y.defer(F);else if(C){if(!e)throw new Error("[Dark]: can not read app state from the server!");const[t]=e;p(T,e),n&&g&&t&&g.write({key:n,id:P,data:t})}}else I()&&!D&&v(k);const O={loading:T.isFetching,data:T.data,error:T.error,refetch:e=>F(!0,e)};return O}function p(e,t){const[i,n]=t;e.isFetching=!1,e.isLoaded=!0,e.data=i,e.error=n}function m(e,t){const{refetchQueries:i=[],onSuccess:n}=t||{},o=(0,u.P)(),c=(0,r.YT)(),d=(0,l.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let r=null;try{d.isFetching=!0,d.error=null,o(),r=await e(...t),(0,a.EY)(n)&&n(c,r),i.forEach((e=>c.invalidate({key:e})))}catch(e){(0,a.vU)(e),d.error=String(e)}finally{d.isFetching=!1,o()}return r},{loading:d.isFetching,data:d.data,error:d.error}]}!function(e){e.PRODUCTS="products",e.PRODUCT_ITEM="product-item"}(n||(n={}));const y=void 0===globalThis.window?100:600,g=e=>new Promise((t=>setTimeout(t,e)));let P=0;const k=new Array(50).fill(null).map((()=>({id:++P,name:`Product #${P}`,description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nostrum blanditiis quia minus corrupti quidem. Ipsam quae ad velit repudiandae molestias unde".repeat(3)}))),T={fetchProducts:async()=>(await g(y),k.map((e=>({...e,description:null})))),fetchProduct:async e=>(v(e)||w(),await g(y),k.find((t=>t.id===e))||null),addProduct:async e=>(v(e.id)&&w(),await g(y),e.id=++P,k.push(e),e),async changeProduct(e){if(v(e.id)||w(),!e)return null;await g(y);const t=k.findIndex((t=>t.id===e.id));return-1!==t&&k.splice(t,1,e),e},async removeProduct(e){v(e)||w(),await g(y);const t=k.findIndex((t=>t.id===e));return-1!==t&&k.splice(t,1),!0}},v=e=>"number"==typeof e&&!Number.isNaN(e),w=()=>{throw new Error("Invalid id!")};function U(){return f((()=>T.fetchProducts()),{key:n.PRODUCTS,onBefore:()=>console.log("[fetch]: products")})}function I(e){return f((({id:e})=>T.fetchProduct(e)),{variables:{id:e},key:n.PRODUCT_ITEM,extractId:e=>e.id,onBefore:()=>{console.log("[fetch]: product",e)}})}function b(){return m(T.addProduct,{onSuccess:(e,t)=>{const i=e.read({key:n.PRODUCTS});if(i){const r=i.data;r.push(t),e.optimistic({key:n.PRODUCTS,data:r})}}})}function R(){return m(T.changeProduct,{onSuccess:(e,t)=>{const i=e.read({key:n.PRODUCTS});if(i){const r=i.data;r.find((e=>e.id===t.id)).name=t.name,e.optimistic({key:n.PRODUCTS,data:r}),e.optimistic({key:n.PRODUCT_ITEM,data:t,id:t.id})}}})}function S(e){return m((()=>T.removeProduct(e)),{onSuccess:t=>{const i=t.read({key:n.PRODUCTS});if(i){const r=i.data,a=r.findIndex((t=>t.id===e));-1!==a&&(r.splice(a,1),t.optimistic({key:n.PRODUCTS,data:r}))}t.delete({key:n.PRODUCT_ITEM,id:e})}})}},1523:(e,t,i)=>{i.d(t,{b:()=>o});var n=i(1261),r=i(3113),a=i(3397);function o(){const e=(0,r.M6)();(0,r.BU)(e);const t=(0,r._L)(),{location:{pathname:i}}=e,o=(0,n.Y)((()=>t?(0,a.L7)(i,t):""),[t,i]);return{path:t,url:o}}},5450:(e,t,i)=>{i.d(t,{U:()=>r});var n=i(3113);function r(){const e=(0,n.M6)();return(0,n.BU)(e),e.params}}}]);
//# sourceMappingURL=997.build.js.map