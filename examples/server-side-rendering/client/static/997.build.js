"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[997],{9997:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var r=i(2654),n=i(3524),a=i(3020),s=i(5450),d=i(1523),c=i(1169),o=i(9041),u=i(5010);const l=(0,r.wU)((({slot:e})=>{const t=(0,s.U)(),i=Number(t.get("id")),{data:r,loading:l,error:h}=(0,o.iB)(i),{url:y}=(0,d.b)(),T=y+"edit/",p=y+"remove/";return l?(0,n.h)(u.$j,null):h?(0,n.h)(u.jj,{value:h}):r?e||(0,n.h)(u.Zb,null,r?(0,n.h)(a.H,null,(0,n.h)("h3",null,r.name),(0,n.h)("p",null,r.description)):(0,n.h)("h3",null,"Item not found ðŸ˜Ÿ"),r&&(0,n.h)(a.H,null,(0,n.h)(u.zx,{as:c.r,to:T},"Edit"),(0,n.h)(u.zx,{as:c.r,to:p},"Remove"))):(0,n.h)(u.Zb,null,(0,n.h)("h3",null,"It seems there is no product with #",i," ðŸ¤«"))}))},9041:(e,t,i)=>{i.d(t,{N8:()=>D,oD:()=>O,iB:()=>E,rn:()=>k,jb:()=>F});var r=i(5747),n=i(9812),a=i(3760),s=i(7544),d=i(6238),c=i(8047),o=i(4435),u=i(1261),l=i(3443);function h(e,t){const{variables:i={},key:h,extractId:T=(()=>r.kI)}=t||{variables:{}},p=(0,l.pj)(),f=(0,r.YT)(),m=T(i),C=(0,u.Y)((()=>p.getNextResourceId()),[]),_=(0,u.Y)((()=>function(e,t,i){const r={isFetching:!0,isLoaded:!1,data:null,error:null,cacheKey:t,cacheId:i},n=e.read({key:t,id:i});return n&&(r.isFetching=!1,r.isLoaded=!0,r.data=n.data),r}(f,h,m)),[]),{register:P,unregister:U}=(0,c.h)(),[R,k]=function(){const e=(0,u.Y)((()=>({isMounted:!0,isFirstTime:!0})),[]),{isFirstTime:t}=e;return(0,a.b)((()=>(e.isFirstTime=!1,()=>e.isMounted=!1)),[]),[()=>e.isMounted,()=>t]}(),E=(0,o.P)(),D=()=>R()&&E(),O=(0,s.X)(),F=p.getIsHydrateZone(),{isLoaded:g}=_;_.cacheKey=h,_.cacheId=m;const I=async(t,a)=>{const s=t?a:i,d=T(s);f.__emit({type:r.VI.QUERY,phase:"start",key:h,data:s});try{O||k()||(_.isFetching=!0,D());const t=await e(s);return f.__emit({type:r.VI.QUERY,phase:"finish",key:h,data:t}),O?p.setResource(C,[t,null]):(U(C),_.data=t,_.isFetching=!1,_.error=null),t&&f.write({key:h,id:d,data:t}),t}catch(e){(0,n.vU)(e),f.__emit({type:r.VI.QUERY,phase:"error",key:h,data:e}),O?p.setResource(C,[null,String(e)]):(U(C),_.isFetching=!1,_.error=String(e))}finally{O||(_.isLoaded=!0,D())}};if((0,d.d4)((()=>{F||f.read({key:h,id:m})?.valid||I()}),[...(0,n.Yl)(i)]),(0,d.d4)((()=>{let e=null;return e=f.subscribe((({type:e,key:t,id:i})=>{t===_.cacheKey&&i===_.cacheId&&("invalidate"!==e&&"optimistic"!==e||f.__canUpdate(t)&&I())})),()=>{U(C),(0,n.EY)(e)&&e()}}),[]),O||F){const e=p.getResource(C);if(O)e?y(_,e):p.defer(I);else if(F){if(!e)throw new Error("[Dark]: can not read app state from the server!");const[t]=e;y(_,e),t&&f.write({key:h,id:m,data:t})}}else k()&&!g&&P(C);const v={loading:_.isFetching,data:_.data,error:_.error,refetch:e=>I(!0,e)};return v}function y(e,t){const[i,r]=t;e.isFetching=!1,e.isLoaded=!0,e.data=i,e.error=r}function T(e,t){const{key:i,refetchQueries:a=[],onSuccess:s}=t||{},d=(0,o.P)(),c=(0,r.YT)(),l=(0,u.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let o=null;c.__emit({type:r.VI.MUTATION,phase:"start",key:i,data:t});try{l.isFetching=!0,l.error=null,d(),o=await e(...t),c.__emit({type:r.VI.MUTATION,phase:"finish",key:i,data:o}),(0,n.EY)(s)&&s(c,o),a.forEach((e=>c.invalidate({key:e})))}catch(e){(0,n.vU)(e),l.error=String(e),c.__emit({type:r.VI.MUTATION,phase:"error",key:i,data:e})}finally{l.isFetching=!1,d()}return o},{loading:l.isFetching,data:l.data,error:l.error}]}const p=void 0===globalThis.window?100:600,f=e=>new Promise((t=>setTimeout(t,e)));let m=0;const C=new Array(50).fill(null).map((()=>({id:++m,name:`Product #${m}`,description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nostrum blanditiis quia minus corrupti quidem. Ipsam quae ad velit repudiandae molestias unde".repeat(3)}))),_={fetchProducts:async()=>(await f(p),C.map((e=>({...e,description:null})))),fetchProduct:async e=>(P(e)||U(),await f(p),C.find((t=>t.id===e))||null),addProduct:async e=>(P(e.id)&&U(),await f(p),e.id=++m,C.push(e),e),async changeProduct(e){if(P(e.id)||U(),!e)return null;await f(p);const t=C.findIndex((t=>t.id===e.id));return-1!==t&&C.splice(t,1,e),e},async removeProduct(e){P(e)||U(),await f(p);const t=C.findIndex((t=>t.id===e));return-1!==t&&C.splice(t,1),!0}},P=e=>"number"==typeof e&&!Number.isNaN(e),U=()=>{throw new Error("Invalid id!")};var R;function k(){return h((()=>_.fetchProducts()),{key:R.FETCH_PRODUCTS})}function E(e){return h((({id:e})=>_.fetchProduct(e)),{key:R.FETCH_PRODUCT,variables:{id:e},extractId:e=>e.id})}function D(){return T(_.addProduct,{key:R.ADD_PRODUCT,onSuccess:(e,t)=>{const i=e.read({key:R.FETCH_PRODUCTS});if(i){const r=i.data;r.push(t),e.optimistic({key:R.FETCH_PRODUCTS,data:r})}}})}function O(){return T(_.changeProduct,{key:R.CHANGE_PRODUCT,onSuccess:(e,t)=>{const i=e.read({key:R.FETCH_PRODUCTS});if(i){const r=i.data;r.find((e=>e.id===t.id)).name=t.name,e.optimistic({key:R.FETCH_PRODUCTS,data:r}),e.optimistic({key:R.FETCH_PRODUCT,data:t,id:t.id})}}})}function F(e){return T((()=>_.removeProduct(e)),{key:R.REMOVE_PRODUCT,onSuccess:t=>{const i=t.read({key:R.FETCH_PRODUCTS});if(i){const r=i.data,n=r.findIndex((t=>t.id===e));-1!==n&&(r.splice(n,1),t.optimistic({key:R.FETCH_PRODUCTS,data:r}))}t.delete({key:R.FETCH_PRODUCT,id:e})}})}!function(e){e.FETCH_PRODUCTS="FETCH_PRODUCTS",e.FETCH_PRODUCT="FETCH_PRODUCT",e.ADD_PRODUCT="ADD_PRODUCT",e.CHANGE_PRODUCT="CHANGE_PRODUCT",e.REMOVE_PRODUCT="REMOVE_PRODUCT"}(R||(R={}))},1523:(e,t,i)=>{i.d(t,{b:()=>s});var r=i(1261),n=i(3113),a=i(3397);function s(){const e=(0,n.M6)();(0,n.BU)(e);const t=(0,n._L)(),{location:{pathname:i}}=e,s=(0,r.Y)((()=>t?(0,a.L7)(i,t):""),[t,i]);return{path:t,url:s}}},5450:(e,t,i)=>{i.d(t,{U:()=>n});var r=i(3113);function n(){const e=(0,r.M6)();return(0,r.BU)(e),e.params}}}]);
//# sourceMappingURL=997.build.js.map