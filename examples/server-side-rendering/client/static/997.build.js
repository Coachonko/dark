"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[997],{8422:(e,t,i)=>{var r;i.d(t,{Z:()=>r,h:()=>s}),function(e){e.PRODUCTS="products",e.PRODUCT_ITEM="product-item"}(r||(r={}));const n=void 0===globalThis.window?100:600,a=e=>new Promise((t=>setTimeout(t,e)));let o=0;const d=new Array(50).fill(null).map((()=>({id:++o,name:`Product #${o}`,description:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nostrum blanditiis quia minus corrupti quidem. Ipsam quae ad velit repudiandae molestias unde".repeat(3)}))),s={fetchProductList:async()=>(console.log("[fetch]: product-list"),await a(n),d.map((e=>({...e,description:null})))),fetchProduct:async e=>(console.log("[fetch]: product",e),c(e)||u(),await a(n),d.find((t=>t.id===e))||null),addProduct:async e=>(c(e.id)&&u(),await a(n),e.id=++o,d.push(e),e),async changeProduct(e){if(c(e.id)||u(),!e)return null;await a(n);const t=d.findIndex((t=>t.id===e.id));return-1!==t&&d.splice(t,1,e),e},async removeProduct(e){c(e)||u(),await a(n);const t=d.findIndex((t=>t.id===e));return-1!==t&&d.splice(t,1),!0}},c=e=>"number"==typeof e&&!Number.isNaN(e),u=()=>{throw new Error("Invalid id!")}},9997:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var r=i(2654),n=i(8903),a=i(3524),o=i(3020),d=i(5450),s=i(1523),c=i(1169),u=i(8422),l=i(5010);const h=(0,r.wU)((({slot:e})=>{const t=(0,d.U)(),{url:i}=(0,s.b)(),r=Number(t.get("id")),{data:h,loading:f,error:p}=(0,n.W)((({id:e})=>u.h.fetchProduct(e)),{variables:{id:r},key:u.Z.PRODUCT_ITEM,extractId:e=>e.id}),m=i+"edit/",g=i+"remove/";return f?(0,a.h)(l.$j,null):p?(0,a.h)(l.jj,{value:p}):e||(0,a.h)(l.Zb,null,h?(0,a.h)(o.H,null,(0,a.h)("h3",null,h.name),(0,a.h)("p",null,h.description)):(0,a.h)("h3",null,"Item not found ðŸ˜Ÿ"),h&&(0,a.h)(o.H,null,(0,a.h)(l.zx,{as:c.r,to:m},"Edit"),(0,a.h)(l.zx,{as:c.r,to:g},"Remove")))}))},8903:(e,t,i)=>{i.d(t,{W:()=>h});var r=i(5747),n=i(9812),a=i(3760),o=i(7544),d=i(6238),s=i(8047),c=i(4435),u=i(1261),l=i(3443);function h(e,t){const{variables:i={},key:h,extractId:p=(()=>r.kI)}=t||{variables:{}},m=(0,l.pj)(),g=(0,r.YT)(),y=p(i),v=(0,u.Y)((()=>m.getNextResourceId()),[]),w=(0,u.Y)((()=>function(e,t,i){const r={isFetching:!0,isLoaded:!1,data:null,error:null,cacheKey:t,cacheId:i};if(e){const n=e.read({key:t,id:i});n&&(r.isFetching=!1,r.isLoaded=!0,r.data=n.data)}return r}(g,h,y)),[]),{register:I,unregister:b}=(0,s.h)(),[k,P]=function(){const e=(0,u.Y)((()=>({isMounted:!0,isFirstTime:!0})),[]),{isFirstTime:t}=e;return(0,a.b)((()=>(e.isFirstTime=!1,()=>e.isMounted=!1)),[]),[()=>e.isMounted,()=>t]}(),T=(0,c.P)(),F=()=>k()&&T(),L=(0,o.X)(),U=m.getIsHydrateZone(),{isLoaded:R}=w;w.cacheKey=h,w.cacheId=y;const x=async(t,r)=>{const a=t?r:i,o=p(a);try{L||P()||(w.isFetching=!0,F());const t=await e(a);return L?m.setResource(v,[t,null]):(b(v),w.data=t,w.isFetching=!1,w.error=null),h&&g&&t&&g.write({key:h,id:o,data:t}),t}catch(e){(0,n.vU)(e),L?m.setResource(v,[null,String(e)]):(b(v),w.isFetching=!1,w.error=String(e))}finally{L||(w.isLoaded=!0,F())}};if((0,d.d4)((()=>{if(!U){if(h&&g&&g.read({key:h,id:y})?.valid)return;x()}}),[...(0,n.Yl)(i)]),(0,d.d4)((()=>{let e=null;return g&&(e=g.onChange((({type:e,key:t,id:i})=>{t===w.cacheKey&&i===w.cacheId&&("invalidate"!==e&&"optimistic"!==e||x())}))),()=>{b(v),(0,n.EY)(e)&&e()}}),[]),L||U){const e=m.getResource(v);if(L)e?f(w,e):m.defer(x);else if(U){if(!e)throw new Error("[Dark]: can not read app state from the server!");const[t]=e;f(w,e),h&&g&&t&&g.write({key:h,id:y,data:t})}}else P()&&!R&&I(v);const M={loading:w.isFetching,data:w.data,error:w.error,refetch:e=>x(!0,e)};return M}function f(e,t){const[i,r]=t;e.isFetching=!1,e.isLoaded=!0,e.data=i,e.error=r}},1523:(e,t,i)=>{i.d(t,{b:()=>o});var r=i(1261),n=i(3113),a=i(3397);function o(){const e=(0,n.M6)();(0,n.BU)(e);const t=(0,n._L)(),{location:{pathname:i}}=e,o=(0,r.Y)((()=>t?(0,a.L7)(i,t):""),[t,i]);return{path:t,url:o}}},5450:(e,t,i)=>{i.d(t,{U:()=>n});var r=i(3113);function n(){const e=(0,r.M6)();return(0,r.BU)(e),e.params}}}]);
//# sourceMappingURL=997.build.js.map