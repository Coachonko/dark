"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[924],{8924:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var a=r(6622),i=r(6580),n=r(7115),s=r(1879),c=r(4301),d=r(9477),o=r(8247),u=r(4710);const l=d.zo.header`
  display: grid;
  grid-template-columns: 1fr 4fr;
  grid-template-rows: auto;
  padding: 16px 0;

  & h2 {
    margin: 0;
  }
`,h=(0,a.wU)((({slot:e})=>{const{url:t}=(0,n.b)(),{pathname:r}=(0,s.T)(),{data:a,loading:d,error:h}=(0,o.rn)(),y=r.endsWith("list/"),T=t+"add/";return d?(0,i.h)(u.$j,null):h?(0,i.h)(u.jj,{value:h}):(0,i.h)(u.iK,null,(0,i.h)(l,null,(0,i.h)("div",null,y?(0,i.h)(u.zx,{as:c.r,to:T},"Add product"):(0,i.h)(u.zx,{onClick:()=>history.back()},"Back"))),(0,i.h)(u.iK,{key:r},e||(0,i.h)(u.aV,null,[...a].reverse().map((e=>(0,i.h)(u.HC,{key:e.id},(0,i.h)(c.r,{to:`${t}${e.id}`},e.name)))))))}))},8247:(e,t,r)=>{r.d(t,{N8:()=>p,oD:()=>U,iB:()=>f,rn:()=>_,jb:()=>R});var a=r(325),i=r(9486),n=r(9582),s=r(428),c=r(7950),d=r(5693),o=r(5166),u=r(8526),l=r(9271);function h(e,t){const{variables:r={},key:h,extractId:T=(()=>a.kI),lazy:C=!1}=t||{variables:{}},k=(0,l.pj)(),_=(0,a.YT)();(0,a.PZ)(_);const f=T(r),p=(0,u.Y)((()=>k.getNextResourceId()),[]),U=(0,u.Y)((()=>function(e,t,r,a){const i={isFetching:!a,isLoaded:!1,data:null,error:null,cacheKey:t,cacheId:r},n=e.read({key:t,id:r});return n&&(i.isFetching=!1,i.isLoaded=!0,i.data=n.data),i}(_,h,f,C)),[]),{register:R,unregister:P}=(0,d.h)(),[D,E]=function(){const e=(0,u.Y)((()=>({isMounted:!0,isFirstTime:!0})),[]),{isFirstTime:t}=e;return(0,n.b)((()=>(e.isFirstTime=!1,()=>e.isMounted=!1)),[]),[()=>e.isMounted,()=>t]}(),O=(0,o.P)(),g=()=>D()&&O(),F=(0,s.X)(),m=k.getIsHydrateZone(),{isLoaded:H}=U;U.cacheKey=h,U.cacheId=f;const I=async t=>{const n=t||r,s=T(n);_.__emit({type:a.VI.QUERY,phase:"start",key:h,data:n});try{F||E()||(U.isFetching=!0,g());const t=await e(n);return _.__emit({type:a.VI.QUERY,phase:"finish",key:h,data:t}),F?k.setResource(p,[t,null]):(P(p),U.data=t,U.isFetching=!1,U.error=null),t&&_.write({key:h,id:s,data:t}),t}catch(e){(0,i.vU)(e),_.__emit({type:a.VI.QUERY,phase:"error",key:h,data:e}),F?k.setResource(p,[null,String(e)]):(P(p),U.isFetching=!1,U.error=String(e))}finally{F||(U.isLoaded=!0,g())}};if((0,c.d4)((()=>{m||C||_.read({key:h,id:f})?.valid||I()}),[...(0,i.Yl)(r)]),(0,c.d4)((()=>{let e=null;return e=_.subscribe((({type:e,key:t,id:r})=>{t===U.cacheKey&&r===U.cacheId&&("invalidate"!==e&&"optimistic"!==e||_.__canUpdate(t)&&I())})),()=>{P(p),(0,i.EY)(e)&&e()}}),[]),F||m){const e=k.getResource(p);if(F)e?y(U,e):k.defer(I);else if(m){if(!e)throw new Error("[Dark]: can not read app state from the server!");const[t]=e;y(U,e),t&&_.write({key:h,id:f,data:t})}}else E()&&!H&&!C&&R(p);return{loading:U.isFetching,data:U.data,error:U.error,refetch:I}}function y(e,t){const[r,a]=t;e.isFetching=!1,e.isLoaded=!0,e.data=r,e.error=a}function T(e,t){const{key:r,refetchQueries:n=[],onSuccess:s}=t||{},c=(0,o.P)(),d=(0,a.YT)();(0,a.PZ)(d);const l=(0,u.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let o=null;d.__emit({type:a.VI.MUTATION,phase:"start",key:r,data:t});try{l.isFetching=!0,l.error=null,c(),o=await e(...t),d.__emit({type:a.VI.MUTATION,phase:"finish",key:r,data:o}),(0,i.EY)(s)&&s(d,o),n.forEach((e=>d.invalidate({key:e})))}catch(e){(0,i.vU)(e),l.error=String(e),d.__emit({type:a.VI.MUTATION,phase:"error",key:r,data:e})}finally{l.isFetching=!1,c()}return o},{loading:l.isFetching,data:l.data,error:l.error}]}var C,k=r(3425);function _(){const e=(0,k.h)();return h((()=>e.fetchProducts()),{key:C.FETCH_PRODUCTS})}function f(e){const t=(0,k.h)();return h((({id:e})=>t.fetchProduct(e)),{key:C.FETCH_PRODUCT,variables:{id:e},extractId:e=>e.id})}function p(){return T((0,k.h)().addProduct,{key:C.ADD_PRODUCT,onSuccess:(e,t)=>{const r=e.read({key:C.FETCH_PRODUCTS});if(r){const a=r.data;a.push(t),e.optimistic({key:C.FETCH_PRODUCTS,data:a})}}})}function U(){return T((0,k.h)().changeProduct,{key:C.CHANGE_PRODUCT,onSuccess:(e,t)=>{const r=e.read({key:C.FETCH_PRODUCTS});if(r){const a=r.data;a.find((e=>e.id===t.id)).name=t.name,e.optimistic({key:C.FETCH_PRODUCTS,data:a}),e.optimistic({key:C.FETCH_PRODUCT,data:t,id:t.id})}}})}function R(e){const t=(0,k.h)();return T((()=>t.removeProduct(e)),{key:C.REMOVE_PRODUCT,onSuccess:t=>{const r=t.read({key:C.FETCH_PRODUCTS});if(r){const a=r.data,i=a.findIndex((t=>t.id===e));-1!==i&&(a.splice(i,1),t.optimistic({key:C.FETCH_PRODUCTS,data:a}))}t.delete({key:C.FETCH_PRODUCT,id:e})}})}!function(e){e.FETCH_PRODUCTS="FETCH_PRODUCTS",e.FETCH_PRODUCT="FETCH_PRODUCT",e.ADD_PRODUCT="ADD_PRODUCT",e.CHANGE_PRODUCT="CHANGE_PRODUCT",e.REMOVE_PRODUCT="REMOVE_PRODUCT"}(C||(C={}))},7115:(e,t,r)=>{r.d(t,{b:()=>s});var a=r(8526),i=r(3017),n=r(8);function s(){const e=(0,i.M6)();(0,i.BU)(e);const t=(0,i._L)(),{location:{pathname:r}}=e,s=(0,a.Y)((()=>t?(0,n.L7)(r,t):""),[t,r]);return{path:t,url:s}}}}]);
//# sourceMappingURL=924.build.js.map