"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[997],{9997:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var i=r(2654),n=r(3524),a=r(5450),s=r(1523),c=r(1169),o=r(8421),d=r(5010);const u=(0,i.wU)((({slot:e})=>{const t=(0,a.U)(),r=Number(t.get("id")),{data:i,loading:u,error:l}=(0,o.iB)(r),{url:h}=(0,s.b)(),T=h+"edit/",y=h+"remove/";return u?(0,n.h)(d.$j,null):l?(0,n.h)(d.jj,{value:l}):i?e||(0,n.h)(d.Zb,null,(0,n.h)("h3",null,i.name),(0,n.h)("p",null,i.description),(0,n.h)(d.zx,{as:c.r,to:T},"Edit"),(0,n.h)(d.zx,{as:c.r,to:y},"Remove")):(0,n.h)(d.Zb,null,(0,n.h)("h3",null,"It seems there is no product with #",r," ðŸ¤«"))}))},8421:(e,t,r)=>{r.d(t,{N8:()=>R,oD:()=>k,iB:()=>f,rn:()=>U,jb:()=>p});var i=r(5747),n=r(9812),a=r(3760),s=r(7544),c=r(6238),o=r(8047),d=r(4435),u=r(1261),l=r(3443);function h(e,t){const{variables:r={},key:h,extractId:y=(()=>i.kI),lazy:C=!1}=t||{variables:{}},_=(0,l.pj)(),U=(0,i.YT)();(0,i.PZ)(U);const f=y(r),R=(0,u.Y)((()=>_.getNextResourceId()),[]),k=(0,u.Y)((()=>function(e,t,r,i){const n={isFetching:!i,isLoaded:!1,data:null,error:null,cacheKey:t,cacheId:r},a=e.read({key:t,id:r});return a&&(n.isFetching=!1,n.isLoaded=!0,n.data=a.data),n}(U,h,f,C)),[]),{register:p,unregister:P}=(0,o.h)(),[D,E]=function(){const e=(0,u.Y)((()=>({isMounted:!0,isFirstTime:!0})),[]),{isFirstTime:t}=e;return(0,a.b)((()=>(e.isFirstTime=!1,()=>e.isMounted=!1)),[]),[()=>e.isMounted,()=>t]}(),O=(0,d.P)(),F=()=>D()&&O(),m=(0,s.X)(),g=_.getIsHydrateZone(),{isLoaded:I}=k;k.cacheKey=h,k.cacheId=f;const v=async t=>{const a=t||r,s=y(a);U.__emit({type:i.VI.QUERY,phase:"start",key:h,data:a});try{m||E()||(k.isFetching=!0,F());const t=await e(a);return U.__emit({type:i.VI.QUERY,phase:"finish",key:h,data:t}),m?_.setResource(R,[t,null]):(P(R),k.data=t,k.isFetching=!1,k.error=null),t&&U.write({key:h,id:s,data:t}),t}catch(e){(0,n.vU)(e),U.__emit({type:i.VI.QUERY,phase:"error",key:h,data:e}),m?_.setResource(R,[null,String(e)]):(P(R),k.isFetching=!1,k.error=String(e))}finally{m||(k.isLoaded=!0,F())}};if((0,c.d4)((()=>{g||C||U.read({key:h,id:f})?.valid||v()}),[...(0,n.Yl)(r)]),(0,c.d4)((()=>{let e=null;return e=U.subscribe((({type:e,key:t,id:r})=>{t===k.cacheKey&&r===k.cacheId&&("invalidate"!==e&&"optimistic"!==e||U.__canUpdate(t)&&v())})),()=>{P(R),(0,n.EY)(e)&&e()}}),[]),m||g){const e=_.getResource(R);if(m)e?T(k,e):_.defer(v);else if(g){if(!e)throw new Error("[Dark]: can not read app state from the server!");const[t]=e;T(k,e),t&&U.write({key:h,id:f,data:t})}}else E()&&!I&&!C&&p(R);return{loading:k.isFetching,data:k.data,error:k.error,refetch:v}}function T(e,t){const[r,i]=t;e.isFetching=!1,e.isLoaded=!0,e.data=r,e.error=i}function y(e,t){const{key:r,refetchQueries:a=[],onSuccess:s}=t||{},c=(0,d.P)(),o=(0,i.YT)();(0,i.PZ)(o);const l=(0,u.Y)((()=>({isFetching:!1,data:null,error:null})),[]);return[async(...t)=>{let d=null;o.__emit({type:i.VI.MUTATION,phase:"start",key:r,data:t});try{l.isFetching=!0,l.error=null,c(),d=await e(...t),o.__emit({type:i.VI.MUTATION,phase:"finish",key:r,data:d}),(0,n.EY)(s)&&s(o,d),a.forEach((e=>o.invalidate({key:e})))}catch(e){(0,n.vU)(e),l.error=String(e),o.__emit({type:i.VI.MUTATION,phase:"error",key:r,data:e})}finally{l.isFetching=!1,c()}return d},{loading:l.isFetching,data:l.data,error:l.error}]}var C,_=r(3359);function U(){const e=(0,_.h)();return h((()=>e.fetchProducts()),{key:C.FETCH_PRODUCTS})}function f(e){const t=(0,_.h)();return h((({id:e})=>t.fetchProduct(e)),{key:C.FETCH_PRODUCT,variables:{id:e},extractId:e=>e.id})}function R(){return y((0,_.h)().addProduct,{key:C.ADD_PRODUCT,onSuccess:(e,t)=>{const r=e.read({key:C.FETCH_PRODUCTS});if(r){const i=r.data;i.push(t),e.optimistic({key:C.FETCH_PRODUCTS,data:i})}}})}function k(){return y((0,_.h)().changeProduct,{key:C.CHANGE_PRODUCT,onSuccess:(e,t)=>{const r=e.read({key:C.FETCH_PRODUCTS});if(r){const i=r.data;i.find((e=>e.id===t.id)).name=t.name,e.optimistic({key:C.FETCH_PRODUCTS,data:i}),e.optimistic({key:C.FETCH_PRODUCT,data:t,id:t.id})}}})}function p(e){const t=(0,_.h)();return y((()=>t.removeProduct(e)),{key:C.REMOVE_PRODUCT,onSuccess:t=>{const r=t.read({key:C.FETCH_PRODUCTS});if(r){const i=r.data,n=i.findIndex((t=>t.id===e));-1!==n&&(i.splice(n,1),t.optimistic({key:C.FETCH_PRODUCTS,data:i}))}t.delete({key:C.FETCH_PRODUCT,id:e})}})}!function(e){e.FETCH_PRODUCTS="FETCH_PRODUCTS",e.FETCH_PRODUCT="FETCH_PRODUCT",e.ADD_PRODUCT="ADD_PRODUCT",e.CHANGE_PRODUCT="CHANGE_PRODUCT",e.REMOVE_PRODUCT="REMOVE_PRODUCT"}(C||(C={}))},1523:(e,t,r)=>{r.d(t,{b:()=>s});var i=r(1261),n=r(3113),a=r(3397);function s(){const e=(0,n.M6)();(0,n.BU)(e);const t=(0,n._L)(),{location:{pathname:r}}=e,s=(0,i.Y)((()=>t?(0,a.L7)(r,t):""),[t,r]);return{path:t,url:s}}},5450:(e,t,r)=>{r.d(t,{U:()=>n});var i=r(3113);function n(){const e=(0,i.M6)();return(0,i.BU)(e),e.params}}}]);
//# sourceMappingURL=997.build.js.map