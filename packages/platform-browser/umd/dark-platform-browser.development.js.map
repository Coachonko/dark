{"version":3,"file":"dark-platform-browser.development.js","mappings":"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","sources":["webpack://DarkPlatformBrowser/webpack/universalModuleDefinition","webpack://DarkPlatformBrowser/./src/constants.ts","webpack://DarkPlatformBrowser/./src/create-root/create-root.tsx","webpack://DarkPlatformBrowser/./src/create-root/index.ts","webpack://DarkPlatformBrowser/./src/dom/dom.ts","webpack://DarkPlatformBrowser/./src/dom/index.ts","webpack://DarkPlatformBrowser/./src/dom/types.ts","webpack://DarkPlatformBrowser/./src/events/events.ts","webpack://DarkPlatformBrowser/./src/events/index.ts","webpack://DarkPlatformBrowser/./src/factory/factory.ts","webpack://DarkPlatformBrowser/./src/factory/index.ts","webpack://DarkPlatformBrowser/./src/portal/index.ts","webpack://DarkPlatformBrowser/./src/portal/portal.tsx","webpack://DarkPlatformBrowser/./src/render/index.ts","webpack://DarkPlatformBrowser/./src/render/render.ts","webpack://DarkPlatformBrowser/./src/scheduler/index.ts","webpack://DarkPlatformBrowser/./src/scheduler/scheduler.ts","webpack://DarkPlatformBrowser/./src/use-style/index.ts","webpack://DarkPlatformBrowser/./src/use-style/use-style.ts","webpack://DarkPlatformBrowser/external umd {\"root\":\"DarkCore\",\"commonjs2\":\"@dark-engine/core\",\"commonjs\":\"@dark-engine/core\",\"amd\":\"@dark-engine/core\"}","webpack://DarkPlatformBrowser/webpack/bootstrap","webpack://DarkPlatformBrowser/webpack/runtime/compat get default export","webpack://DarkPlatformBrowser/webpack/runtime/define property getters","webpack://DarkPlatformBrowser/webpack/runtime/hasOwnProperty shorthand","webpack://DarkPlatformBrowser/webpack/runtime/make namespace object","webpack://DarkPlatformBrowser/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@dark-engine/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"DarkPlatformBrowser\", [\"@dark-engine/core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DarkPlatformBrowser\"] = factory(require(\"@dark-engine/core\"));\n\telse\n\t\troot[\"DarkPlatformBrowser\"] = factory(root[\"DarkCore\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__dark_engine_core__) => {\nreturn ","export const SVG_TAG_NAMES =\r\n  'svg,animate,animateMotion,animateTransform,circle,clipPath,defs,desc,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,image,line,linearGradient,marker,mask,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,stop,switch,symbol,text,textPath,tspan,use,view';\r\nexport const VOID_TAG_NAMES = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\r\n","import { type DarkElement, unmountRoot } from '@dark-engine/core';\r\nimport { render, roots } from '../render';\r\n\r\nfunction createRoot(container: Element) {\r\n  return {\r\n    render: (element: DarkElement) => render(element, container),\r\n    unmount: () => {\r\n      const rootId = roots.get(container);\r\n\r\n      unmountRoot(rootId, () => {\r\n        roots.delete(container);\r\n        container.innerHTML = '';\r\n      });\r\n    },\r\n  };\r\n}\r\n\r\nexport { createRoot };\r\n","export * from './create-root';\r\n","import {\r\n  type Fiber,\r\n  type VirtualNode,\r\n  type TagVirtualNode,\r\n  type TextVirtualNode,\r\n  type CommentVirtualNode,\r\n  type Ref,\r\n  ATTR_KEY,\r\n  ATTR_REF,\r\n  ATTR_FLAG,\r\n  EffectTag,\r\n  detectIsFunction,\r\n  detectIsUndefined,\r\n  detectIsBoolean,\r\n  keyBy,\r\n  NodeType,\r\n  detectIsVirtualNode,\r\n  detectIsTagVirtualNode,\r\n  detectIsTextVirtualNode,\r\n  detectIsMutableRef,\r\n  walkFiber,\r\n} from '@dark-engine/core';\r\nimport { detectIsPortal, getPortalContainer } from '../portal';\r\nimport { delegateEvent, detectIsEvent, getEventName } from '../events';\r\nimport type { DOMElement, DOMFragment, AttributeValue } from './types';\r\nimport { SVG_TAG_NAMES, VOID_TAG_NAMES } from '../constants';\r\n\r\nconst attrBlackListMap = {\r\n  [ATTR_KEY]: true,\r\n  [ATTR_REF]: true,\r\n  [ATTR_FLAG]: true,\r\n};\r\nlet fragmentsMap: Map<Element, DOMFragment> = new Map();\r\nlet moves: Array<() => void> = [];\r\nlet trackUpdate: (nativeElement: Element) => void = null;\r\nconst svgTagNamesMap = keyBy(SVG_TAG_NAMES.split(','), x => x);\r\nconst voidTagNamesMap = keyBy(VOID_TAG_NAMES.split(','), x => x);\r\n\r\nconst createNativeElementMap = {\r\n  [NodeType.TAG]: (vNode: VirtualNode) => {\r\n    const tagNode = vNode as TagVirtualNode;\r\n    const node = detectIsSvgElement(tagNode.name)\r\n      ? document.createElementNS('http://www.w3.org/2000/svg', tagNode.name)\r\n      : document.createElement(tagNode.name);\r\n\r\n    return node;\r\n  },\r\n  [NodeType.TEXT]: (vNode: VirtualNode) => {\r\n    const textNode = vNode as TextVirtualNode;\r\n    const node = document.createTextNode(textNode.value);\r\n\r\n    return node;\r\n  },\r\n  [NodeType.COMMENT]: (vNode: VirtualNode) => {\r\n    const commentNode = vNode as CommentVirtualNode;\r\n    const node = document.createComment(commentNode.value);\r\n\r\n    return node;\r\n  },\r\n};\r\n\r\nfunction createNativeElement(vNode: VirtualNode): DOMElement {\r\n  return createNativeElementMap[vNode.type](vNode);\r\n}\r\n\r\nfunction detectIsSvgElement(tagName: string) {\r\n  return Boolean(svgTagNamesMap[tagName]);\r\n}\r\n\r\nfunction detectIsVoidElement(tagName: string) {\r\n  return Boolean(voidTagNamesMap[tagName]);\r\n}\r\n\r\nfunction applyRef(ref: Ref<Element>, element: Element) {\r\n  if (detectIsFunction(ref)) {\r\n    ref(element);\r\n  } else if (detectIsMutableRef(ref)) {\r\n    ref.current = element;\r\n  }\r\n}\r\n\r\nfunction addAttributes(element: Element, vNode: VirtualNode) {\r\n  if (!detectIsTagVirtualNode(vNode)) return;\r\n  const attrNames = Object.keys(vNode.attrs);\r\n\r\n  for (const attrName of attrNames) {\r\n    const attrValue = vNode.attrs[attrName];\r\n\r\n    if (attrName === ATTR_REF) {\r\n      applyRef(attrValue, element);\r\n      continue;\r\n    }\r\n\r\n    if (detectIsFunction(attrValue)) {\r\n      if (detectIsEvent(attrName)) {\r\n        delegateEvent({\r\n          target: element,\r\n          handler: attrValue,\r\n          eventName: getEventName(attrName),\r\n        });\r\n      }\r\n    } else if (!detectIsUndefined(attrValue) && !attrBlackListMap[attrName]) {\r\n      const stop = patchProperties({\r\n        tagName: vNode.name,\r\n        attrValue,\r\n        attrName,\r\n        element,\r\n      });\r\n\r\n      !stop && element.setAttribute(attrName, attrValue);\r\n    }\r\n  }\r\n}\r\n\r\nfunction updateAttributes(element: Element, vNode: TagVirtualNode, nextVNode: TagVirtualNode) {\r\n  const attrNames = new Set([...Object.keys(vNode.attrs), ...Object.keys(nextVNode.attrs)]);\r\n\r\n  for (const attrName of attrNames) {\r\n    const prevAttrValue = vNode.attrs[attrName];\r\n    const nextAttrValue = nextVNode.attrs[attrName];\r\n\r\n    if (attrName === ATTR_REF) {\r\n      applyRef(prevAttrValue, element);\r\n      continue;\r\n    }\r\n\r\n    if (!detectIsUndefined(nextAttrValue)) {\r\n      if (detectIsFunction(prevAttrValue)) {\r\n        if (detectIsEvent(attrName) && prevAttrValue !== nextAttrValue) {\r\n          delegateEvent({\r\n            target: element,\r\n            handler: nextAttrValue,\r\n            eventName: getEventName(attrName),\r\n          });\r\n        }\r\n      } else if (!attrBlackListMap[attrName] && prevAttrValue !== nextAttrValue) {\r\n        const stop = patchProperties({\r\n          tagName: nextVNode.name,\r\n          attrValue: nextAttrValue,\r\n          attrName,\r\n          element,\r\n        });\r\n\r\n        !stop && element.setAttribute(attrName, nextAttrValue);\r\n      }\r\n    } else {\r\n      element.removeAttribute(attrName);\r\n    }\r\n  }\r\n}\r\n\r\ntype PatchPropertiesOptions = {\r\n  tagName: string;\r\n  element: Element;\r\n  attrName: string;\r\n  attrValue: AttributeValue;\r\n};\r\n\r\nfunction patchProperties(options: PatchPropertiesOptions): boolean {\r\n  const { tagName, element, attrName, attrValue } = options;\r\n  const fn = patchPropertiesSpecialCasesMap[tagName];\r\n  let stop = fn ? fn(element, attrName, attrValue) : false;\r\n\r\n  if (canSetProperty(Object.getPrototypeOf(element), attrName)) {\r\n    element[attrName] = attrValue;\r\n  }\r\n\r\n  if (!stop && detectIsBoolean(attrValue)) {\r\n    stop = !attrName.includes('-');\r\n  }\r\n\r\n  return stop;\r\n}\r\n\r\nfunction canSetProperty(prototype: Element, key: string) {\r\n  return prototype.hasOwnProperty(key) && Boolean(Object.getOwnPropertyDescriptor(prototype, key)?.set);\r\n}\r\n\r\nconst patchPropertiesSpecialCasesMap: Record<\r\n  string,\r\n  (element: Element, attrName: string, attrValue: AttributeValue) => boolean\r\n> = {\r\n  input: (element: HTMLInputElement, attrName: string, attrValue: AttributeValue) => {\r\n    if (attrName === 'value' && detectIsBoolean(attrValue)) {\r\n      element.checked = attrValue;\r\n    } else if (attrName === 'autoFocus') {\r\n      element.autofocus = Boolean(attrValue);\r\n    }\r\n\r\n    return false;\r\n  },\r\n  textarea: (element: HTMLTextAreaElement, attrName: string, attrValue: AttributeValue) => {\r\n    if (attrName === 'value') {\r\n      element.innerHTML = String(attrValue);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  },\r\n};\r\n\r\nfunction getParentFiberWithNativeElement(fiber: Fiber<Element>): Fiber<Element> {\r\n  let nextFiber = fiber;\r\n\r\n  while (nextFiber) {\r\n    nextFiber = nextFiber.parent;\r\n\r\n    if (detectIsPortal(nextFiber.instance)) {\r\n      nextFiber.nativeElement = getPortalContainer(nextFiber.instance);\r\n    }\r\n\r\n    if (nextFiber.nativeElement) return nextFiber;\r\n  }\r\n\r\n  return nextFiber;\r\n}\r\n\r\nfunction append(fiber: Fiber<Element>, parentElement: Element) {\r\n  const { fragment } =\r\n    fragmentsMap.get(parentElement) ||\r\n    ({\r\n      fragment: document.createDocumentFragment(),\r\n      callback: () => {},\r\n    } as DOMFragment);\r\n\r\n  fragmentsMap.set(parentElement, {\r\n    fragment,\r\n    callback: () => {\r\n      parentElement.appendChild(fragment);\r\n    },\r\n  });\r\n  fragment.appendChild(fiber.nativeElement);\r\n}\r\n\r\nfunction insert(fiber: Fiber<Element>, parentElement: Element, idx: number) {\r\n  parentElement.insertBefore(fiber.nativeElement, parentElement.childNodes[idx]);\r\n}\r\n\r\nfunction commitCreation(fiber: Fiber<Element>) {\r\n  const parentFiber = getParentFiberWithNativeElement(fiber);\r\n  const parentElement = parentFiber.nativeElement;\r\n  const childNodes = parentElement.childNodes;\r\n  const hasNoChildNodes = childNodes.length === 0;\r\n  const idx = hasNoChildNodes ? 0 : fiber.elementIdx;\r\n\r\n  if (hasNoChildNodes || idx > childNodes.length - 1) {\r\n    const vNode = parentFiber.instance as TagVirtualNode;\r\n\r\n    !detectIsVoidElement(vNode.name) && append(fiber, parentElement);\r\n  } else {\r\n    insert(fiber, parentElement, idx);\r\n  }\r\n\r\n  addAttributes(fiber.nativeElement, fiber.instance as VirtualNode);\r\n}\r\n\r\nfunction commitUpdate(fiber: Fiber<Element>) {\r\n  const element = fiber.nativeElement;\r\n  const prevInstance = fiber.alternate.instance as VirtualNode;\r\n  const nextInstance = fiber.instance as VirtualNode;\r\n\r\n  if (\r\n    detectIsTextVirtualNode(prevInstance) &&\r\n    detectIsTextVirtualNode(nextInstance) &&\r\n    prevInstance.value !== nextInstance.value\r\n  ) {\r\n    return (element.textContent = nextInstance.value);\r\n  }\r\n\r\n  if (detectIsTagVirtualNode(prevInstance) && detectIsTagVirtualNode(nextInstance)) {\r\n    return updateAttributes(element, prevInstance, nextInstance);\r\n  }\r\n}\r\n\r\nfunction commitDeletion(fiber: Fiber<Element>) {\r\n  const parentFiber = getParentFiberWithNativeElement(fiber);\r\n\r\n  walkFiber<Element>(fiber, ({ nextFiber, isReturn, resetIsDeepWalking, stop }) => {\r\n    if (nextFiber === fiber.nextSibling || nextFiber === fiber.parent) {\r\n      return stop();\r\n    }\r\n\r\n    if (!isReturn && nextFiber.nativeElement) {\r\n      !detectIsPortal(nextFiber.instance) && parentFiber.nativeElement.removeChild(nextFiber.nativeElement);\r\n\r\n      return resetIsDeepWalking();\r\n    }\r\n  });\r\n}\r\n\r\nfunction move(fiber: Fiber<Element>) {\r\n  const sourceNodes = collectElements(fiber);\r\n  const sourceNode = sourceNodes[0];\r\n  const parentElement = sourceNode.parentElement;\r\n  const sourceFragment = new DocumentFragment();\r\n  const elementIdx = fiber.elementIdx;\r\n  let idx = 0;\r\n  const move = () => {\r\n    for (let i = 1; i < sourceNodes.length; i++) {\r\n      parentElement.removeChild(parentElement.childNodes[elementIdx + 1]);\r\n    }\r\n\r\n    parentElement.replaceChild(sourceFragment, parentElement.childNodes[elementIdx]);\r\n  };\r\n\r\n  for (const node of sourceNodes) {\r\n    parentElement.insertBefore(document.createComment(`${elementIdx}:${idx}`), node);\r\n    sourceFragment.appendChild(node);\r\n    idx++;\r\n  }\r\n\r\n  moves.push(move);\r\n}\r\n\r\nfunction collectElements(fiber: Fiber<Element>) {\r\n  const store: Array<Element> = [];\r\n\r\n  walkFiber<Element>(fiber, ({ nextFiber, isReturn, resetIsDeepWalking, stop }) => {\r\n    if (nextFiber === fiber.nextSibling || nextFiber === fiber.parent) {\r\n      return stop();\r\n    }\r\n\r\n    if (!isReturn && nextFiber.nativeElement) {\r\n      !detectIsPortal(nextFiber.instance) && store.push(nextFiber.nativeElement);\r\n\r\n      return resetIsDeepWalking();\r\n    }\r\n  });\r\n\r\n  return store;\r\n}\r\n\r\nconst applyCommitMap: Record<EffectTag, (fiber: Fiber<Element>) => void> = {\r\n  [EffectTag.CREATE]: (fiber: Fiber<Element>) => {\r\n    if (fiber.nativeElement === null) return;\r\n    trackUpdate && trackUpdate(fiber.nativeElement);\r\n    commitCreation(fiber);\r\n  },\r\n  [EffectTag.UPDATE]: (fiber: Fiber<Element>) => {\r\n    if (fiber.move) {\r\n      move(fiber);\r\n      fiber.move = false;\r\n    }\r\n\r\n    if (\r\n      fiber.nativeElement === null ||\r\n      !detectIsVirtualNode(fiber.alternate.instance) ||\r\n      !detectIsVirtualNode(fiber.instance)\r\n    ) {\r\n      return;\r\n    }\r\n    trackUpdate && trackUpdate(fiber.nativeElement);\r\n    commitUpdate(fiber);\r\n  },\r\n  [EffectTag.DELETE]: (fiber: Fiber<Element>) => commitDeletion(fiber),\r\n  [EffectTag.SKIP]: () => {},\r\n};\r\n\r\nfunction applyCommit(fiber: Fiber<Element>) {\r\n  applyCommitMap[fiber.effectTag](fiber);\r\n}\r\n\r\nfunction finishCommitWork() {\r\n  for (const { callback } of fragmentsMap.values()) {\r\n    callback();\r\n  }\r\n\r\n  for (const move of moves) {\r\n    move();\r\n  }\r\n\r\n  fragmentsMap = new Map();\r\n  moves = [];\r\n}\r\n\r\nfunction setTrackUpdate(fn: typeof trackUpdate) {\r\n  trackUpdate = fn;\r\n}\r\n\r\nexport { createNativeElement, applyCommit, finishCommitWork, setTrackUpdate };\r\n","export * from './dom';\r\nexport * from './types';\r\n","export type DOMElement = HTMLElement | SVGElement | Text | Comment;\r\n\r\nexport type DOMFragment = {\r\n  fragment: DocumentFragment;\r\n  callback: () => void;\r\n};\r\n\r\nexport type AttributeValue = string | number | boolean;\r\n","import { detectIsFunction, eventsStore } from '@dark-engine/core';\r\n\r\ntype BrowserEventConstructor = (type: string, event: Event) => void;\r\n\r\nclass SyntheticEvent<E extends Event, T = Element> {\r\n  public type = '';\r\n  public sourceEvent: E = null;\r\n  public target: T = null;\r\n  private propagation = true;\r\n\r\n  constructor(options: Pick<SyntheticEvent<E, T>, 'sourceEvent' | 'target'>) {\r\n    this.type = options.sourceEvent.type;\r\n    this.sourceEvent = options.sourceEvent;\r\n    this.target = options.target;\r\n  }\r\n\r\n  public stopPropagation() {\r\n    this.propagation = false;\r\n    this.sourceEvent.stopPropagation();\r\n  }\r\n\r\n  public preventDefault() {\r\n    this.sourceEvent.preventDefault();\r\n  }\r\n\r\n  public getPropagation() {\r\n    return this.propagation;\r\n  }\r\n}\r\n\r\ntype DelegateEventOptions = {\r\n  target: Element;\r\n  eventName: string;\r\n  handler: (e: Event) => void;\r\n};\r\n\r\nfunction delegateEvent(options: DelegateEventOptions) {\r\n  const { target, eventName, handler } = options;\r\n  const eventsMap = eventsStore.get();\r\n  const handlerMap = eventsMap.get(eventName);\r\n\r\n  if (!handlerMap) {\r\n    const rootHandler = (event: Event) => {\r\n      const fireEvent = eventsMap.get(eventName).get(event.target);\r\n      const target = event.target as Element;\r\n      let syntheticEvent: SyntheticEvent<Event> = null;\r\n\r\n      if (detectIsFunction(fireEvent)) {\r\n        syntheticEvent = new SyntheticEvent({\r\n          sourceEvent: event,\r\n          target,\r\n        });\r\n        fireEvent(syntheticEvent);\r\n      }\r\n\r\n      if (syntheticEvent ? syntheticEvent.getPropagation() : target.parentElement) {\r\n        target.parentElement.dispatchEvent(new (event.constructor as BrowserEventConstructor)(event.type, event));\r\n      }\r\n    };\r\n\r\n    eventsMap.set(eventName, new WeakMap([[target, handler]]));\r\n    document.addEventListener(eventName, rootHandler, true);\r\n    eventsStore.addUnsubscriber(() => document.removeEventListener(eventName, rootHandler, true));\r\n  } else {\r\n    handlerMap.set(target, handler);\r\n  }\r\n}\r\n\r\nconst detectIsEvent = (attrName: string) => attrName.startsWith('on');\r\n\r\nconst getEventName = (attrName: string) => attrName.slice(2, attrName.length).toLowerCase();\r\n\r\nexport { SyntheticEvent, delegateEvent, detectIsEvent, getEventName };\r\n","export * from './events';\r\n","import { View, type ViewDef } from '@dark-engine/core';\r\n\r\ntype TagProps = Omit<ViewDef, 'as' | 'isVoid'>;\r\n\r\nconst factory = (as: string) => (props?: TagProps) => View({ as, ...(props || {}) });\r\n\r\nconst html = factory('html');\r\nconst body = factory('body');\r\nconst base = factory('base');\r\nconst head = factory('head');\r\nconst link = factory('link');\r\nconst meta = factory('meta');\r\nconst style = factory('style');\r\nconst title = factory('title');\r\nconst address = factory('address');\r\nconst article = factory('article');\r\nconst aside = factory('aside');\r\nconst footer = factory('footer');\r\nconst header = factory('header');\r\nconst h1 = factory('h1');\r\nconst h2 = factory('h2');\r\nconst h3 = factory('h3');\r\nconst h4 = factory('h4');\r\nconst h5 = factory('h5');\r\nconst h6 = factory('h6');\r\nconst nav = factory('nav');\r\nconst section = factory('section');\r\nconst div = factory('div');\r\nconst dd = factory('dd');\r\nconst dl = factory('dl');\r\nconst figcaption = factory('figcaption');\r\nconst figure = factory('figure');\r\nconst picture = factory('picture');\r\nconst hr = factory('hr');\r\nconst img = factory('img');\r\nconst li = factory('li');\r\nconst main = factory('main');\r\nconst ol = factory('ol');\r\nconst p = factory('p');\r\nconst pre = factory('pre');\r\nconst ul = factory('ul');\r\nconst a = factory('a');\r\nconst b = factory('b');\r\nconst abbr = factory('abbr');\r\nconst bdi = factory('bdi');\r\nconst bdo = factory('bdo');\r\nconst br = factory('br');\r\nconst cite = factory('cite');\r\nconst code = factory('code');\r\nconst data = factory('data');\r\nconst dfn = factory('dfn');\r\nconst em = factory('em');\r\nconst i = factory('i');\r\nconst kbd = factory('kbd');\r\nconst mark = factory('mark');\r\nconst q = factory('q');\r\nconst rp = factory('rp');\r\nconst rt = factory('rt');\r\nconst ruby = factory('ruby');\r\nconst s = factory('s');\r\nconst samp = factory('samp');\r\nconst small = factory('small');\r\nconst span = factory('span');\r\nconst strong = factory('strong');\r\nconst sub = factory('sub');\r\nconst sup = factory('sup');\r\nconst time = factory('time');\r\nconst u = factory('u');\r\nconst _var = factory('var');\r\nconst wbr = factory('wbr');\r\nconst area = factory('area');\r\nconst audio = factory('audio');\r\nconst map = factory('map');\r\nconst track = factory('track');\r\nconst video = factory('video');\r\nconst embed = factory('embed');\r\nconst object = factory('object');\r\nconst param = factory('param');\r\nconst source = factory('source');\r\nconst canvas = factory('canvas');\r\nconst script = factory('script');\r\nconst noscript = factory('noscript');\r\nconst del = factory('del');\r\nconst ins = factory('ins');\r\nconst caption = factory('caption');\r\nconst col = factory('col');\r\nconst colgroup = factory('colgroup');\r\nconst table = factory('table');\r\nconst thead = factory('thead');\r\nconst tbody = factory('tbody');\r\nconst td = factory('td');\r\nconst th = factory('th');\r\nconst tr = factory('tr');\r\nconst button = factory('button');\r\nconst datalist = factory('datalist');\r\nconst fieldset = factory('fieldset');\r\nconst form = factory('form');\r\nconst input = factory('input');\r\nconst label = factory('label');\r\nconst legend = factory('legend');\r\nconst meter = factory('meter');\r\nconst optgroup = factory('optgroup');\r\nconst option = factory('option');\r\nconst output = factory('output');\r\nconst progress = factory('progress');\r\nconst select = factory('select');\r\nconst textarea = factory('textarea');\r\nconst details = factory('details');\r\nconst dialog = factory('dialog');\r\nconst menu = factory('menu');\r\nconst summary = factory('summary');\r\nconst template = factory('template');\r\nconst blockquote = factory('blockquote');\r\nconst iframe = factory('iframe');\r\nconst tfoot = factory('tfoot');\r\nconst svg = factory('svg');\r\nconst animate = factory('animate');\r\nconst animateMotion = factory('animateMotion');\r\nconst animateTransform = factory('animateTransform');\r\nconst circle = factory('circle');\r\nconst clipPath = factory('clipPath');\r\nconst defs = factory('defs');\r\nconst desc = factory('desc');\r\nconst ellipse = factory('ellipse');\r\nconst feBlend = factory('feBlend');\r\nconst feColorMatrix = factory('feColorMatrix');\r\nconst feComponentTransfer = factory('feComponentTransfer');\r\nconst feComposite = factory('feComposite');\r\nconst feConvolveMatrix = factory('feConvolveMatrix');\r\nconst feDiffuseLighting = factory('feDiffuseLighting');\r\nconst feDisplacementMap = factory('feDisplacementMap');\r\nconst feDistantLight = factory('feDistantLight');\r\nconst feDropShadow = factory('feDropShadow');\r\nconst feFlood = factory('feFlood');\r\nconst feFuncA = factory('feFuncA');\r\nconst feFuncB = factory('feFuncB');\r\nconst feFuncG = factory('feFuncG');\r\nconst feFuncR = factory('feFuncR');\r\nconst feGaussianBlur = factory('feGaussianBlur');\r\nconst feImage = factory('feImage');\r\nconst feMerge = factory('feMerge');\r\nconst feMergeNode = factory('feMergeNode');\r\nconst feMorphology = factory('feMorphology');\r\nconst feOffset = factory('feOffset');\r\nconst fePointLight = factory('fePointLight');\r\nconst feSpecularLighting = factory('feSpecularLighting');\r\nconst feSpotLight = factory('feSpotLight');\r\nconst feTile = factory('feTile');\r\nconst feTurbulence = factory('feTurbulence');\r\nconst filter = factory('filter');\r\nconst foreignObject = factory('foreignObject');\r\nconst g = factory('g');\r\nconst image = factory('image');\r\nconst line = factory('line');\r\nconst linearGradient = factory('linearGradient');\r\nconst marker = factory('marker');\r\nconst mask = factory('mask');\r\nconst metadata = factory('metadata');\r\nconst mpath = factory('mpath');\r\nconst path = factory('path');\r\nconst pattern = factory('pattern');\r\nconst polygon = factory('polygon');\r\nconst polyline = factory('polyline');\r\nconst radialGradient = factory('radialGradient');\r\nconst rect = factory('rect');\r\nconst stop = factory('stop');\r\nconst _switch = factory('switch');\r\nconst symbol = factory('symbol');\r\nconst text = factory('text');\r\nconst textPath = factory('textPath');\r\nconst tspan = factory('tspan');\r\nconst use = factory('use');\r\nconst view = factory('view');\r\n\r\nexport {\r\n  factory,\r\n  html,\r\n  body,\r\n  base,\r\n  head,\r\n  link,\r\n  meta,\r\n  style,\r\n  title,\r\n  address,\r\n  article,\r\n  aside,\r\n  footer,\r\n  header,\r\n  h1,\r\n  h2,\r\n  h3,\r\n  h4,\r\n  h5,\r\n  h6,\r\n  nav,\r\n  section,\r\n  div,\r\n  dd,\r\n  dl,\r\n  figcaption,\r\n  figure,\r\n  picture,\r\n  hr,\r\n  img,\r\n  li,\r\n  main,\r\n  ol,\r\n  p,\r\n  pre,\r\n  ul,\r\n  a,\r\n  b,\r\n  abbr,\r\n  bdi,\r\n  bdo,\r\n  br,\r\n  cite,\r\n  code,\r\n  data,\r\n  dfn,\r\n  em,\r\n  i,\r\n  kbd,\r\n  mark,\r\n  q,\r\n  rp,\r\n  rt,\r\n  ruby,\r\n  s,\r\n  samp,\r\n  small,\r\n  span,\r\n  strong,\r\n  sub,\r\n  sup,\r\n  time,\r\n  u,\r\n  _var,\r\n  wbr,\r\n  area,\r\n  audio,\r\n  map,\r\n  track,\r\n  video,\r\n  embed,\r\n  object,\r\n  param,\r\n  source,\r\n  canvas,\r\n  script,\r\n  noscript,\r\n  del,\r\n  ins,\r\n  caption,\r\n  col,\r\n  colgroup,\r\n  table,\r\n  thead,\r\n  tbody,\r\n  td,\r\n  th,\r\n  tr,\r\n  button,\r\n  datalist,\r\n  fieldset,\r\n  form,\r\n  input,\r\n  label,\r\n  legend,\r\n  meter,\r\n  optgroup,\r\n  option,\r\n  output,\r\n  progress,\r\n  select,\r\n  textarea,\r\n  details,\r\n  dialog,\r\n  menu,\r\n  summary,\r\n  template,\r\n  blockquote,\r\n  iframe,\r\n  tfoot,\r\n  svg,\r\n  animate,\r\n  animateMotion,\r\n  animateTransform,\r\n  circle,\r\n  clipPath,\r\n  defs,\r\n  desc,\r\n  ellipse,\r\n  feBlend,\r\n  feColorMatrix,\r\n  feComponentTransfer,\r\n  feComposite,\r\n  feConvolveMatrix,\r\n  feDiffuseLighting,\r\n  feDisplacementMap,\r\n  feDistantLight,\r\n  feDropShadow,\r\n  feFlood,\r\n  feFuncA,\r\n  feFuncB,\r\n  feFuncG,\r\n  feFuncR,\r\n  feGaussianBlur,\r\n  feImage,\r\n  feMerge,\r\n  feMergeNode,\r\n  feMorphology,\r\n  feOffset,\r\n  fePointLight,\r\n  feSpecularLighting,\r\n  feSpotLight,\r\n  feTile,\r\n  feTurbulence,\r\n  filter,\r\n  foreignObject,\r\n  g,\r\n  image,\r\n  line,\r\n  linearGradient,\r\n  marker,\r\n  mask,\r\n  metadata,\r\n  mpath,\r\n  path,\r\n  pattern,\r\n  polygon,\r\n  polyline,\r\n  radialGradient,\r\n  rect,\r\n  stop,\r\n  _switch,\r\n  symbol,\r\n  text,\r\n  textPath,\r\n  tspan,\r\n  use,\r\n  view,\r\n};\r\n","export * from './factory';\r\n","export * from './portal';\r\n","import {\r\n  type Fiber,\r\n  type DarkElement,\r\n  type ComponentFactory,\r\n  createComponent,\r\n  detectIsComponentFactory,\r\n  useMemo,\r\n} from '@dark-engine/core';\r\n\r\nconst $$portal = Symbol('portal');\r\n\r\nfunction createPortal(slot: DarkElement, container: Element) {\r\n  if (!(container instanceof Element)) {\r\n    throw new Error(`[Dark]: createPortal receives only Element as container!`);\r\n  }\r\n\r\n  return Portal({ [$$portal]: container, slot });\r\n}\r\n\r\ntype PortalProps = {\r\n  [$$portal]: Element;\r\n  slot: DarkElement;\r\n};\r\n\r\nconst Portal = createComponent<PortalProps>(\r\n  ({ slot, ...rest }) => {\r\n    useMemo(() => (rest[$$portal].innerHTML = ''), []);\r\n\r\n    return slot;\r\n  },\r\n  { token: $$portal },\r\n);\r\n\r\nconst detectIsPortal = (factory: unknown): factory is ComponentFactory =>\r\n  detectIsComponentFactory(factory) && factory.token === $$portal;\r\n\r\nconst getPortalContainer = (factory: unknown): Element | null =>\r\n  detectIsPortal(factory) ? factory.props[$$portal] : null;\r\n\r\nfunction unmountPortal(fiber: Fiber<Element>) {\r\n  const container = getPortalContainer(fiber.instance);\r\n\r\n  if (container) {\r\n    container.innerHTML = '';\r\n  }\r\n}\r\n\r\nexport { createPortal, detectIsPortal, getPortalContainer, unmountPortal };\r\n","export * from './render';\r\n","import {\r\n  type DarkElement,\r\n  type VirtualNodeFactory,\r\n  type ComponentFactory,\r\n  ROOT,\r\n  Fiber,\r\n  EffectTag,\r\n  platform,\r\n  flatten,\r\n  detectIsUndefined,\r\n  TagVirtualNode,\r\n  rootStore,\r\n  wipRootStore,\r\n  currentRootStore,\r\n  nextUnitOfWorkStore,\r\n  fiberMountStore,\r\n  TaskPriority,\r\n  createReplacer,\r\n  isInsertionEffectsZone,\r\n  isLayoutEffectsZone,\r\n} from '@dark-engine/core';\r\nimport { createNativeElement, applyCommit, finishCommitWork } from '../dom';\r\nimport { detectIsPortal, unmountPortal } from '../portal';\r\nimport { scheduleCallback, shouldYeildToHost } from '../scheduler';\r\n\r\nplatform.createNativeElement = createNativeElement as typeof platform.createNativeElement;\r\nplatform.requestAnimationFrame = requestAnimationFrame.bind(this);\r\nplatform.cancelAnimationFrame = cancelAnimationFrame.bind(this);\r\nplatform.scheduleCallback = scheduleCallback;\r\nplatform.shouldYeildToHost = shouldYeildToHost;\r\nplatform.applyCommit = applyCommit;\r\nplatform.finishCommitWork = finishCommitWork;\r\nplatform.detectIsPortal = detectIsPortal;\r\nplatform.unmountPortal = unmountPortal;\r\n\r\nconst roots = new Map<Element, number>();\r\n\r\nfunction render(element: DarkElement, container: Element) {\r\n  if (!(container instanceof Element)) {\r\n    throw new Error(`[Dark]: render receives only Element as container!`);\r\n  }\r\n\r\n  const isMounted = !detectIsUndefined(roots.get(container));\r\n  let rootId: number = null;\r\n\r\n  if (!isMounted) {\r\n    rootId = roots.size;\r\n\r\n    roots.set(container, rootId);\r\n    container.innerHTML = '';\r\n  } else {\r\n    rootId = roots.get(container);\r\n  }\r\n\r\n  // insertion effect can't schedule renders\r\n  if (isInsertionEffectsZone.get(rootId)) return;\r\n\r\n  const callback = () => {\r\n    rootStore.set(rootId); // important order!\r\n    const currentRoot = currentRootStore.get();\r\n    const fiber = new Fiber().mutate({\r\n      nativeElement: container,\r\n      instance: new TagVirtualNode({\r\n        name: ROOT,\r\n        children: flatten([element || createReplacer()]) as Array<VirtualNodeFactory | ComponentFactory>,\r\n      }),\r\n      alternate: currentRoot,\r\n      effectTag: isMounted ? EffectTag.UPDATE : EffectTag.CREATE,\r\n    });\r\n\r\n    currentRoot && (currentRoot.alternate = null);\r\n    fiberMountStore.reset();\r\n    wipRootStore.set(fiber);\r\n    nextUnitOfWorkStore.set(fiber);\r\n  };\r\n\r\n  platform.scheduleCallback(callback, {\r\n    priority: TaskPriority.NORMAL,\r\n    forceSync: isLayoutEffectsZone.get(),\r\n  });\r\n}\r\n\r\nexport { render, roots };\r\n","export * from './scheduler';\r\n","import { type ScheduleCallbackOptions, getTime, workLoop, wipRootStore, TaskPriority } from '@dark-engine/core';\r\n\r\ntype Callback = () => boolean;\r\n\r\ntype QueueByPriority = {\r\n  animations: Array<Task>;\r\n  hight: Array<Task>;\r\n  normal: Array<Task>;\r\n  low1: Array<Task>;\r\n  low2: Array<Task>;\r\n};\r\n\r\nconst queueByPriority: QueueByPriority = {\r\n  animations: [],\r\n  hight: [],\r\n  normal: [],\r\n  low1: [],\r\n  low2: [],\r\n};\r\nconst YEILD_INTERVAL = 4;\r\nconst MAX_LOW_PRIORITY_TASKS_LIMIT = 100000;\r\nlet scheduledCallback: Callback = null;\r\nlet deadline = 0;\r\nlet isMessageLoopRunning = false;\r\nlet currentTask: Task = null;\r\n\r\nclass Task {\r\n  public static nextTaskId = 0;\r\n  public id: number;\r\n  public time: number;\r\n  public timeoutMs: number;\r\n  public priority: TaskPriority;\r\n  public forceSync: boolean;\r\n  public callback: () => void;\r\n\r\n  constructor(options: Omit<Task, 'id'>) {\r\n    this.id = ++Task.nextTaskId;\r\n    this.time = options.time;\r\n    this.timeoutMs = options.timeoutMs;\r\n    this.priority = options.priority;\r\n    this.forceSync = options.forceSync;\r\n    this.callback = options.callback;\r\n  }\r\n}\r\n\r\nconst shouldYeildToHost = () => getTime() >= deadline;\r\n\r\nfunction scheduleCallback(callback: () => void, options?: ScheduleCallbackOptions) {\r\n  const { priority = TaskPriority.NORMAL, timeoutMs = 0, forceSync = false } = options || {};\r\n  const task = new Task({ time: getTime(), timeoutMs, priority, forceSync, callback });\r\n  const map: Record<TaskPriority, () => void> = {\r\n    [TaskPriority.ANIMATION]: () => queueByPriority.animations.push(task),\r\n    [TaskPriority.HIGH]: () => queueByPriority.hight.push(task),\r\n    [TaskPriority.NORMAL]: () => queueByPriority.normal.push(task),\r\n    [TaskPriority.LOW]: () => (task.timeoutMs > 0 ? queueByPriority.low2.push(task) : queueByPriority.low1.push(task)),\r\n  };\r\n\r\n  map[task.priority]();\r\n  executeTasks();\r\n}\r\n\r\nfunction pick(queue: Array<Task>) {\r\n  if (!queue.length) return false;\r\n  currentTask = queue.shift();\r\n  const isAnimation = currentTask.priority === TaskPriority.ANIMATION;\r\n\r\n  currentTask.callback();\r\n\r\n  if (currentTask.forceSync || isAnimation) {\r\n    requestCallbackSync(workLoop);\r\n  } else {\r\n    requestCallback(workLoop);\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction executeTasks() {\r\n  const isBusy = Boolean(wipRootStore.get());\r\n\r\n  if (!isBusy) {\r\n    checkOverdueTasks() ||\r\n      gc() ||\r\n      pick(queueByPriority.animations) ||\r\n      pick(queueByPriority.hight) ||\r\n      pick(queueByPriority.normal) ||\r\n      requestIdleCallback(() => pick(queueByPriority.low1) || pick(queueByPriority.low2));\r\n  }\r\n}\r\n\r\nfunction gc() {\r\n  if (queueByPriority.low1.length > MAX_LOW_PRIORITY_TASKS_LIMIT) {\r\n    queueByPriority.low1 = [];\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction checkOverdueTasks() {\r\n  const [task] = queueByPriority.low2;\r\n\r\n  if (task && getTime() - task.time > task.timeoutMs) {\r\n    pick(queueByPriority.low2);\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction performWorkUntilDeadline() {\r\n  if (scheduledCallback) {\r\n    deadline = getTime() + YEILD_INTERVAL;\r\n\r\n    try {\r\n      const hasMoreWork = scheduledCallback();\r\n\r\n      if (!hasMoreWork) {\r\n        currentTask = null;\r\n        isMessageLoopRunning = false;\r\n        scheduledCallback = null;\r\n        executeTasks();\r\n      } else {\r\n        port.postMessage(null);\r\n      }\r\n    } catch (error) {\r\n      port.postMessage(null);\r\n      throw error;\r\n    }\r\n  } else {\r\n    isMessageLoopRunning = false;\r\n  }\r\n}\r\n\r\nfunction requestCallback(callback: Callback) {\r\n  if (process.env.NODE_ENV === 'test') {\r\n    return requestCallbackSync(callback);\r\n  }\r\n\r\n  scheduledCallback = callback;\r\n\r\n  if (!isMessageLoopRunning) {\r\n    isMessageLoopRunning = true;\r\n    port.postMessage(null);\r\n  }\r\n}\r\n\r\nfunction requestCallbackSync(callback: Callback) {\r\n  while (callback()) {\r\n    //\r\n  }\r\n  executeTasks();\r\n  currentTask = null;\r\n}\r\n\r\nlet channel: MessageChannel = null;\r\nlet port: MessagePort = null;\r\n\r\nfunction setup() {\r\n  if (process.env.NODE_ENV === 'test') {\r\n    return;\r\n  }\r\n\r\n  channel = new MessageChannel();\r\n  port = channel.port2;\r\n\r\n  channel.port1.onmessage = performWorkUntilDeadline;\r\n}\r\n\r\nsetup();\r\n\r\nexport { shouldYeildToHost, scheduleCallback };\r\n","export * from './use-style';\r\n","import { useMemo, detectIsUndefined } from '@dark-engine/core';\r\n\r\nfunction styled(strings: TemplateStringsArray, ...args: Array<string | number>): string {\r\n  const style = useMemo(() => {\r\n    return strings\r\n      .map((x, idx) => x + (!detectIsUndefined(args[idx]) ? args[idx] : ''))\r\n      .join('')\r\n      .replace(/;\\s*/gm, ';')\r\n      .replace(/:\\s*/gm, ':')\r\n      .trim();\r\n  }, [strings, ...args]);\r\n\r\n  return style;\r\n}\r\n\r\ntype Style = Record<string, string>;\r\n\r\ntype Config<T extends Style> = (x: typeof styled) => T;\r\n\r\nfunction useStyle<T extends Style>(config: Config<T>) {\r\n  return config(styled);\r\n}\r\n\r\nexport { useStyle };\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__dark_engine_core__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable @typescript-eslint/no-namespace */\r\nexport type { SyntheticEvent } from './events';\r\nexport { render } from './render';\r\nexport { createRoot } from './create-root';\r\nexport { createPortal } from './portal';\r\nexport { useStyle } from './use-style';\r\nexport { setTrackUpdate } from './dom';\r\nexport * from './factory';\r\n\r\nexport const version = process.env.VERSION;\r\n\r\ndeclare global {\r\n  namespace JSX {\r\n    interface IntrinsicElements {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-ignore\r\n      [elemName: string]: any;\r\n    }\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":""}